# InventSight - Intelligent Inventory & POS System Configuration
# Current Date and Time (UTC): 2025-08-26 09:33:31
# Current User's Login: WinKyaw
# Repository: WinKyaw/InventSight

spring:
  application:
    name: inventsight-backend
    
  # PostgreSQL Configuration (Core Business Data)
  datasource:
    url: jdbc:postgresql://localhost:5432/inventsight_db
    username: inventsight_user
    password: inventsight_password_2025
    driver-class-name: org.postgresql.Driver
    
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        # Multi-tenancy configuration - only enabled for PostgreSQL profiles
        # Will be overridden by profile-specific configurations
        
  # MongoDB Configuration (Analytics & Logs)
  data:
    mongodb:
      uri: mongodb://localhost:27017/inventsight_analytics
      auto-index-creation: true
      
    # Redis Configuration (Cache & Sessions)  
    redis:
      host: localhost
      port: 6379
      timeout: 2000ms
      password: # Leave empty for local development
  
  # Email Configuration
  mail:
    host: ${EMAIL_HOST:smtp.example.com}
    port: ${EMAIL_PORT:587}
    username: ${EMAIL_USERNAME:}
    password: ${EMAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
  
  # OAuth2 Resource Server Configuration  
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${JWT_ISSUER_URI:}
          jwk-set-uri: ${JWT_JWK_SET_URI:}
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:}
            client-secret: ${GOOGLE_CLIENT_SECRET:}
            scope: openid,profile,email
          microsoft:
            client-id: ${MICROSOFT_CLIENT_ID:}
            client-secret: ${MICROSOFT_CLIENT_SECRET:}
            scope: openid,profile,email
          okta:
            client-id: ${OKTA_CLIENT_ID:}
            client-secret: ${OKTA_CLIENT_SECRET:}
            scope: openid,profile,email
        provider:
          microsoft:
            issuer-uri: https://login.microsoftonline.com/${MICROSOFT_TENANT_ID:common}/v2.0
          okta:
            issuer-uri: ${OKTA_ISSUER_URI:}
      
# Server Configuration
server:
  port: 8080
  servlet:
    context-path: /api
    
# Security Configuration
inventsight:
  security:
    jwt:
      secret: inventsight-super-secret-jwt-key-winkyaw-2025-08-26
      expiration: 300000 # 5 minutes (300,000 ms) for enhanced security
      refresh-expiration: 604800000 # 7 days
      
    oauth2:
      resource-server:
        enabled: ${OAUTH2_ENABLED:false}
        audiences: ${JWT_AUDIENCES:inventsight-api}
        clock-skew-seconds: ${JWT_CLOCK_SKEW_SECONDS:60}
      login:
        enabled: ${OAUTH2_LOGIN_ENABLED:false}
      
    saml:
      enabled: ${SAML_ENABLED:false}
      
  system:
    name: "InventSight - Intelligent Inventory & POS System"
    version: "1.0.0"
    current-user: "WinKyaw"
    timezone: "UTC"
    current-datetime: "2025-08-26 09:33:31"
    
  database:
    sql-enabled: true
    nosql-enabled: true
    cache-enabled: true
    
  features:
    real-time-sync: true
    analytics-tracking: true
    audit-logging: true
    intelligent-forecasting: true
    
  # Feature Flags
  tenancy:
    header:
      enabled: ${TENANCY_HEADER_ENABLED:true}
      validate-against-jwt: ${TENANCY_VALIDATE_JWT:true}
      
  # Rate Limiting Configuration
  rate-limiting:
    enabled: ${RATE_LIMITING_ENABLED:true}
    per-tenant:
      requests-per-minute: ${RATE_LIMIT_TENANT_RPM:1000}
    per-ip:
      requests-per-minute: ${RATE_LIMIT_IP_RPM:100}
    auth-endpoints:
      requests-per-minute: ${RATE_LIMIT_AUTH_RPM:10}
      
  # GDPR Configuration
  gdpr:
    export:
      format: ${GDPR_EXPORT_FORMAT:json} # json, csv, or both
    retention:
      audit-fields-allowlist: actor,timestamp,action,tenant_id,company_id
      
  # Offline Sync Configuration
  sync:
    idempotency:
      enabled: ${SYNC_IDEMPOTENCY_ENABLED:true}
      ttl-hours: ${SYNC_IDEMPOTENCY_TTL:24}
    change-feed:
      enabled: ${SYNC_CHANGE_FEED_ENABLED:true}
      page-size: ${SYNC_CHANGE_FEED_PAGE_SIZE:100}
      
  # Email Provider Configuration
  email:
    provider: ${EMAIL_PROVIDER:smtp} # Options: smtp, ses, sendgrid
    from-address: ${EMAIL_FROM:noreply@inventsight.com}
    from-name: "InventSight"
    
  # Data Retention Policy
  data:
    retention:
      days: ${DATA_RETENTION_DAYS:365}
      
  # Currency Configuration
  currency:
    default-code: ${DEFAULT_CURRENCY:USD}
    fx:
      provider: ${FX_PROVIDER:mock} # Options: mock, ecb, openexchangerates
      api-key: ${FX_API_KEY:}
      cache-ttl-hours: ${FX_CACHE_TTL:24}
    
  # MFA Configuration  
  mfa:
    issuer: "InventSight"
    totp:
      window-size: 3 # Allow 3 time windows for clock skew

# Logging Configuration
logging:
  level:
    com.inventsight: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
  file:
    name: logs/inventsight.log
    
# Management/Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
      
# OpenAPI Documentation
springdoc:
  api-docs:
    path: /docs
  swagger-ui:
    path: /swagger