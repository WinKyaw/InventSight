# PostgreSQL production/development profile with multi-tenancy enabled

spring:
  jpa:
    properties:
      hibernate:
        # Enable schema-based multi-tenancy for PostgreSQL
        multiTenancy: SCHEMA
        tenant_identifier_resolver: com.pos.inventsight.tenant.TenantIdentifierResolver
        multi_tenant_connection_provider: com.pos.inventsight.tenant.SchemaBasedMultiTenantConnectionProvider
  
  # Flyway Configuration for PostgreSQL Profile
  # Disabled for development - using Hibernate DDL-auto instead
  # Re-enable when schema stabilizes and ready for production
  flyway:
    enabled: false
    validate-on-migrate: false  # Lenient validation for development
    repair: true  # Auto-repair checksum mismatches
    clean-disabled: false  # Allow clean for development database resets